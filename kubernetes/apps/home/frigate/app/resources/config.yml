# yaml-language-server: $schema=https://frigate.dmfrey.com/api/config/schema.json
logger:
  default: info
  # logs:
  #   frigate.record: debug

mqtt:
  host: mosquitto.home.svc.cluster.local
  port: 1883
  topic_prefix: frigate

database:
  path: /config/frigate.db

detectors:
  ov:
    type: openvino
    device: GPU

model:
  model_type: yolo-generic
  width: 320
  height: 320
  input_tensor: nhwc
  input_pixel_format: rgb
  path: /config/model_cache/yolov7-320.onnx
  labelmap_path: /labelmap/coco-80.txt

ffmpeg:
  global_args: ["-hide_banner", "-loglevel", "warning"]
  hwaccel_args: preset-intel-qsv-h264
  output_args:
    record: preset-record-ubiquiti

detect:
  enabled: true
  fps: 5

snapshots:
  enabled: true
  timestamp: false
  bounding_box: true
  retain:
    default: 14

record:
  enabled: true
  retain:
    days: 3
    mode: all
  detections:
    pre_capture: 5
    post_capture: 5
    retain:
      days: 14
      mode: active_objects

cameras:
  door:
    ffmpeg:
      inputs:
        - path: rtsp://go2rtc-streams.home.svc.cluster.local:554/door_lq
          roles: [detect]
        - path: rtsp://go2rtc-streams.home.svc.cluster.local:554/door_hq
          roles: [record]
    detect:
      width: 720
      height: 960
    motion:
      mask: 0.274,0.468,0.35,0.471,0.349,0.543,0.275,0.546
    live:
      streams:
        main_stream: pool_record
        sub_stream: pool_detect

telemetry:
  stats:
    intel_gpu_stats: false
  version_check: false
