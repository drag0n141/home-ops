# yaml-language-server: $schema=https://frigate.dmfrey.com/api/config/schema.json
logger:
  default: info
  # logs:
  #   frigate.record: debug

mqtt:
  host: mosquitto.home.svc.cluster.local
  port: 1883
  topic_prefix: frigate

database:
  path: /config/frigate.db

detectors:
  ov:
    type: openvino
    device: GPU

model:
  model_type: yolo-generic
  width: 320
  height: 320
  input_tensor: nchw
  input_dtype: float
  path: /config/model_cache/yolov9-s-320.onnx
  labelmap_path: /labelmap/coco-80.txt

ffmpeg:
  global_args: ["-hide_banner", "-loglevel", "warning"]
  hwaccel_args: preset-intel-qsv-h264
  output_args:
    record: preset-record-ubiquiti

detect:
  enabled: true
  fps: 5

snapshots:
  enabled: true
  timestamp: false
  bounding_box: true
  retain:
    default: 14

record:
  enabled: true
  retain:
    days: 3
    mode: all
  detections:
    pre_capture: 5
    post_capture: 5
    retain:
      days: 14
      mode: active_objects

cameras:
  door:
    ffmpeg:
      inputs:
        - path: rtsp://go2rtc-streams.home.svc.cluster.local:554/door_lq
          roles: [detect]
        - path: rtsp://go2rtc-streams.home.svc.cluster.local:554/door_hq
          roles: [record]
    detect:
      width: 720
      height: 960
    motion:
      mask: 0.267,0.475,0.367,0.473,0.349,0.554,0.272,0.557
    zones:
      terrasse:
        coordinates: 0,0.694,0.356,0.703,0.391,0.76,0.706,0.707,0.998,0.806,1,1,0,1
  garden:
    ffmpeg:
      inputs:
        - path: rtsp://go2rtc-streams.home.svc.cluster.local:554/garden_lq
          roles: [detect]
        - path: rtsp://go2rtc-streams.home.svc.cluster.local:554/garden_hq
          roles: [record]
    motion:
      mask:
        - 0,0,0.222,0,0.221,0.103,0.194,0.23,0.031,0.781,0,0.575
        - 0.461,0.268,0.495,0.272,0.551,0.119,0.507,0.107
    zones:
      garden_right:
        coordinates: 0.512,0.25,0.609,0.388,0.749,0.584,0.935,0.859,0.987,0.706,0.697,0.287
    detect:
      width: 1280
      height: 720
  yard:
    ffmpeg:
      inputs:
        - path: rtsp://go2rtc-streams.home.svc.cluster.local:554/yard_lq
          roles: [detect]
        - path: rtsp://go2rtc-streams.home.svc.cluster.local:554/yard_hq
          roles: [record]
    detect:
      width: 1280
      height: 720
    motion:
      mask:
        - 0.942,0,0.869,0.297,0,0.544,0,0
        - 0.869,0.295,0.963,0.447,0.998,0.36,1,0.005,1,0.005,1,0,0.943,0

telemetry:
  stats:
    intel_gpu_stats: false
  version_check: false
