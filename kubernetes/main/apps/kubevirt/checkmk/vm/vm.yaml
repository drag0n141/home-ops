---
apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: checkmk
spec:
  preference:
    kind: VirtualMachinePreference
    name: checkmk
  instancetype:
    kind: VirtualMachineInstancetype
    name: checkmk
  runStrategy: Always
  template:
    metadata:
      labels:
        kubevirt.io/os: linux
    spec:
      hostname: checkmk
      networks:
        - name: eth0
          multus:
            default: true
            networkName: networking/multus-server
      volumes:
        - name: root
          persistentVolumeClaim:
            claimName: checkmk
      domain:
        devices:
          disks:
            - name: root
              disk: {}
          interfaces:
            - name: eth0
              bridge: {}
          autoattachInputDevice: false
          inputs: []
        firmware:
          uuid: "${SECRET_CHECKMK_UUID}"
          bootloader:
            efi:
              persistent: true
