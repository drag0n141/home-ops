version: v1alpha1
debug: false
persist: true
machine:
    type: worker
    token: ENC[AES256_GCM,data:yTuacy/JOIM1IZ28O5cUTs/RO7Cscs0=,iv:OyS/MR3CX4o3nwCX2nh4S9RozaLV14/unIVYeDOtuWk=,tag:LbF8ZlbzTlojo5T7LuwM9w==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:gE34OQJzqKWu+gCWkSDCxLXMiZzeIcn7csTLj1+LTL985CU5ahaLjGn0D3XJ/qC/3vCWYmeKB2T/9mY6oGO+DxXavjD9SrU5TRCrVrpzh4WknVJWRZB5b04F/2wGjnBuBfELuexAuPJ6O5upkUruUP8YFpwlxQEs9l07Yp2irZTrMv5sQfx6d4RyWde/jrnSpgdDqTKfbdh9e3oO2iisIakQwaI2BJ4ExMtcWrvccfrEiyQfUA0670Os4404c71ZiE5AWM7gBSgwMm83UnNQZuQhsrRg1sbPyXWzc/JMbb7aNUS/VhmpSeg/7Rtin2BiXRt3MqxfLF5uqCdXwvBWbYQfFyb3iIP235JYnz13oH7W7/RVW+TCKbZr/gxfPVdjfVi/umY+V7aETgD60ELlo2sJvYb0MAcsuOD+vW44HpjbioYT5E10NjdXYv7oqRO8i2V/N8JMT07u3xT9MrpZdZs4QE36kdSx8NAYV4j8FfjxPK17/JZQc4TRF+dJEDA0NdRftyhhBi0ZlmTec3s7TH7qtMyNQEwJeKaoqrqXMPkQhCbzPc7nK6DYf9nUIicfXASGVEkSZCigPdTyLlTSR36OtUG9LgNNgnjbL0jLh35GlwmY+LtwhsVadEhmrug+/B0M1qb3PdZtMmU42fj5bhimxjOnZO17J2W8dKBCKXN0Ee16LbcLnPfRD3vW24KMtTzkKgVQg63UY4VplrY1n28iq4M12hMdMz2/zGQZUwfp7Q+CPw0kfKeamt60TF9K5waOOodD+4xB83bxjNEOcCoDHymNcIrX9KNeRmhhNKnqMZGS1GVmI54FrrFgYnT2Gk6AvEaG59JsuXCXNpfYeB6dNcbWt5UUQCp1Erj9bBR8EyQy,iv:Nopk6csRr/aOiYABWp7qxdwb4ebrqWsCXtDz3P11gzI=,tag:HdWzqrqyDSIwgnMi+nKUYw==,type:str]
        key: ""
    certSANs:
        - 127.0.0.1
        - 192.168.254.250
    kubelet:
        image: ghcr.io/siderolabs/kubelet:${KUBERNETES_VERSION}
        extraArgs:
            rotate-server-certificates: "true"
        extraMounts:
            - destination: /var/openebs/local
              type: bind
              source: /var/openebs/local
              options:
                - bind
                - rshared
                - rw
        defaultRuntimeSeccompProfileEnabled: true
        nodeIP:
            validSubnets:
                - 192.168.254.0/24
        disableManifestsDirectory: true
    network:
        interfaces:
            - deviceSelector:
                hardwareAddr: 48:21:0b:59:*
                driver: igc
              dhcp: true
              vlans:
                - vlanId: 150
                  mtu: 1500
                  dhcp: false
                - vlanId: 160
                  mtu: 1500
                  dhcp: false
        disableSearchDomain: true
        nameservers:
            - 192.168.254.1
    install:
        diskSelector:
            model: TS512GMTS430S
        extraKernelArgs:
            - mitigations=off
            - module_blacklist=e1000e
        image: factory.talos.dev/installer/${TALOS_SCHEMATIC_ID}:${TALOS_VERSION}
        wipe: false
    files:
        - content: |-
            [plugins."io.containerd.grpc.v1.cri"]
              enable_unprivileged_ports = true
              enable_unprivileged_icmp = true
            [plugins."io.containerd.grpc.v1.cri".containerd]
              discard_unpacked_layers = false
            [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
              discard_unpacked_layers = false
          permissions: 0
          path: /etc/cri/conf.d/20-customization.part
          op: create
        - content: |-
            [ NFSMount_Global_Options ]
            nfsvers=4.2
            hard=True
            noatime=True
            nodiratime=True
            rsize=131072
            wsize=131072
            nconnect=8
          permissions: 420
          path: /etc/nfsmount.conf
          op: overwrite
    time:
        disabled: false
        servers:
            - time.cloudflare.com
    sysctls:
        fs.inotify.max_queued_events: "65536"
        fs.inotify.max_user_instances: "8192"
        fs.inotify.max_user_watches: "524288"
        net.core.rmem_max: "2500000"
        net.core.wmem_max: "2500000"
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
        kubePrism:
            enabled: true
            port: 7445
    udev:
        rules:
            - ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"
            - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
    nodeLabels:
        topology.kubernetes.io/region: main
        topology.kubernetes.io/zone: w
cluster:
    id: ENC[AES256_GCM,data:Mpv74vImT5GZRa9vUipCTkQfTi4ekK1HkXqV51Co+SZgE58aCwlDYvxtL98=,iv:PpGAGkOYyk79XwWZUUt1CMgbEvZbu6yaivDIhPd8e6k=,tag:qe3JKw65LyAt9ychZ/RGKQ==,type:str]
    secret: ENC[AES256_GCM,data:ITbZV5+KByv18BKU8C2yd+MragbkyFMNIX6vT2HV5WG3txlnKP8m4q08QXY=,iv:oXAsjtfXfi3JZBZXgq+YPq7LMZz91RBHFnJnmLT+td4=,tag:aeC+8ZbWiqUGUQfS73Wi8A==,type:str]
    controlPlane:
        endpoint: https://192.168.254.250:6443
    network:
        cni:
            name: none
        dnsDomain: cluster.local
        podSubnets:
            - 10.42.0.0/16
        serviceSubnets:
            - 10.43.0.0/16
    coreDNS:
        disabled: true
    token: ENC[AES256_GCM,data:/fB2wse/GUa+aSwaWiOOuzINhw4OgL0=,iv:IKAe0NW/Vprfa+9OQPgJVQX+R6w6v+z39Ir/Tk/x/vU=,tag:BaSj6R4KHaS353Mnie9HTQ==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:ANjIqG+EkrvoiNTZVoaLLbQH7VftAm164pT2AQpquRP3IDp1kxPtj7GqEdIXlGueMxRWEgIQY2F8Vaqho46Jl412Oqkn2J9+6GBIsQmOBR4R2947JWICu16DMDgPlh+DyUy/dWoE6sMbp6eeW5Zxdk+bPIAMKYtw3h8h9o3ylQLfLJeHs9/NUrxaRQHql1YwQ2iqWC7BCn7R48V9jz4gsG1G55lDJLzkC/M70hDb+96Ek4730w96iVIFQn5esG73x2ahCE1QyWoqumMKVyoBFmbxZDezFeAi9Eoh97ej9MVHPkRq3DIle8XWfmbIEEACmlukmY4/+bKpnufkKOTTcE8cEShrV8gAV2qiZ3JI3QoF0w0A4WDI3w2sa9Dy9ipzJmS+QLOP935pIHz/bl4xuXIh7h0dfLZKnzUB3lBZM/vMpa9tqrWkfTpCbzOO1GlV+HvRsvj0Q/incojqkO2estUJj7d1oQdsGuoazB8zS2hDrcTy4zWCfpFu9dO73RySO8bWVnW3hN6zYYoMAZxMCJUUc086J6LguYyHBI0/VXunP26nxQMFkJiWvWnbxnMRnMPQ3tRgj9IattE/jfkVLJ4CKvqg5ZTG7Q20BFw3fJs9Dn4UG0TCuB5h4MUEGOs+q/S0IohbYaMi9Ps5COUzw72e4Zz3UTv67VaNwAd/KPIQSonmiiyrogHRHxnZTOc7OUs0IdoVLUmGdSY3+XvQuKC/1Lq0Q4u7vTiV8TV3vaquP3eYJjET0v4+ySszi6JX/xYkh0OIh7E7JHfWhGn875ViJ8iZxKC548I0JFv4IA/SM4u3Ne4JLsgWL/3y/8TXF5SsH1UahmTSlcUn0AavdwBP44f91Jn12RHDt9nNDxI0LH3Rex34XNSvWFzum8ogQVMB/hLf/+86B4B1ikjPfynLRW0aDr84SUHm7LVe60FbaPDJ9OppGmDPcJtLUuueOtTr9s9CG+9RxEQMLqBaJPszkEy9esKXiT/lpMdCcDnDd0vQA85AFpM/0nINHkVoUu4CKZjIkszF6A6lWt08GYCkMd4=,iv:3i7HFtJdginCSyedNj5/uz8F7NoTHAt4n8oReEzZ/cw=,tag:99EoK+feq/dxWPo08qHL2Q==,type:str]
        key: ""
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: false
            service:
                disabled: false
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age12j7f9ytucevfgfazw9h9rlaprtkv90kzunjkrsx90zsllnfhqemqhv6nrj
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBYeHdlWmlNMDVnUlpoZEg3
            REtuVlhlQlhiNm1GdUpkL3gxeGppZWo1Mms4CmwzR1UvL2U1TnllVFRYemo2VVQ2
            S09JK3g2bWFrRFFmeXkvT0tuSkU0UVUKLS0tIFR1cmk0d004MDVjTzg2d2cxc1p6
            SmZLa3o4NTJ2bnpGVTJYQ1ZzbjFGQ0UKjeTdPYT2iK8+kpMP6rAGMbjfKFiqZVp5
            TpNqeDjaxHNUtGzzGInl9ym7IE/0KscrTzZ03ccGMSxC1cXU0537sg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-04-24T11:55:56Z"
    mac: ENC[AES256_GCM,data:7L6cdsRfMe93NavF5EzmgB6PItwfoK9jLm6ZIoC8Nmtzzh4u+JkgopQ3fUkDr9UjTaHXPvGj16NfP4NFhX9OJhWc1iOUR2nOnHNM/Vu5Cy9FcslDYn/e+V6QVkYIvgkUNFvebVqF1SeaPiUZ71Kt2riB3Ya+qrwTqDvYXhGFXPM=,iv:Xk5X8gOt82IBLchTQV4+cDYwfuVHCpPS2j/k08U5Gvc=,tag:3LEtqgQr8UZSNOb4m2GW8g==,type:str]
    pgp: []
    encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
    version: 3.8.1
