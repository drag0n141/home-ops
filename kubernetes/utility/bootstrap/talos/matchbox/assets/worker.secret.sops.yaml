version: v1alpha1
debug: false
persist: true
machine:
    type: worker
    token: ENC[AES256_GCM,data:h+fWO/IHcw71J+YsZo4Cm4PuXxj8LTU=,iv:nSGILboJjM5KH4O6XkkKREvJXA8Cp0/b9zxUhs3HEjo=,tag:hMi6xvE9bGVx9RjYb22UaQ==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:oZXMybdw/lX0KjYhL1xWvFkQMJz9yDBsP1uW2EQOoPtsOGvMDCwZrI4rsEUSiFz4BH1w2vHFYPUYlYvzSf2hpPgSgJHu1Ru4/Wj5DZsuImT3UyXTMmuVvsSCCdsKtWy5CrW5brh9lkLNzyYj2IdWskA5Y5pTBv3ieSKAY5zWBG1fv7wcB4r3rRO6cuYXBbVQYkoUpJWO3DkPIMiGP/fxWP9t8lm4swRLB6GshBMEJmpqS2T90ZN90b9t7il4D9bngof5CmNnIYgm3UI0giuwZYgQxyd1IctlLjZlox0kLVJTu7i7BeMPMPxRT0ov2PsursfqgCSGiwaCGGB+h3dnGuvlHtucRgCsDqflTsXjQnxdweMCThFP3ZrfGHeqCGEpCTeHEHIwxbFjLhWsyaK4NiKQWyjkbWja4eooWKL5Ccogenq5yT9fYkUWgU3c346wK2OEFHos92190haGncZMXbZ1ZokQgivwDsslzLCls+x457KqfKLAn6l6JBkcOD1JyV9EsGV97NOxMdezLhhLAxkc4s340b8oqaCeeOgS1b6b1451TMV7RQdYRzkWx7B/diqUrmtPpMqyIJo4Jx0WK917ET5sgTA9Ml15Rr0UA3zeaPDqa2uVu5vdNTjJq5mNX3acqB4CPghc3UQn0FNkqeEYYX/QBBOWX9dYm78T9Gr0VqBee49wz+6PGKbU0kfLgAdAYg+VI0kKEEDKfnlR3Ca44lZ7M5fby515S0YCHm4hZqmFpNLD2NGqJAhdUkatlEwQaJQHrqGhI5QHeS7T355Z9oXVrc8pvQbaZ6JnYk9lVTQ1HBKJWLmA1hTkjT0MaRyDdVagTeR2yjae/OceKsl8rqE8s6ORLYFsqJc51V8Z8zsG,iv:Ygd4sO0hwAZvoqXHg4ed4dhak6kczWD6ZpmD7uVpsAc=,tag:g8uU4MPVcS5pRCAaewnjIQ==,type:str]
        key: ""
    certSANs:
        - 127.0.0.1
        - 192.168.254.89
    kubelet:
        image: ghcr.io/siderolabs/kubelet:${KUBERNETES_VERSION}
        extraArgs:
            rotate-server-certificates: "true"
        extraMounts:
            - destination: /var/openebs/local
              type: bind
              source: /var/openebs/local
              options:
                - bind
                - rshared
                - rw
        defaultRuntimeSeccompProfileEnabled: true
        nodeIP:
            validSubnets:
                - 192.168.254.0/24
        disableManifestsDirectory: true
    network:
        interfaces:
            - deviceSelector:
                hardwareAddr: 48:21:0b:3d:*
                driver: igc
              dhcp: true
        disableSearchDomain: true
        nameservers:
            - 192.168.254.1
    install:
        diskSelector:
            model: THNSN5256GPUK*
        extraKernelArgs:
            - mitigations=off
            - module_blacklist=e1000e
        image: factory.talos.dev/installer/${TALOS_SCHEMATIC_ID}:${TALOS_VERSION}
        wipe: false
    files:
        - content: |-
            [plugins."io.containerd.grpc.v1.cri"]
              enable_unprivileged_ports = true
              enable_unprivileged_icmp = true
            [plugins."io.containerd.grpc.v1.cri".containerd]
              discard_unpacked_layers = false
            [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
              discard_unpacked_layers = false
          permissions: 0
          path: /etc/cri/conf.d/20-customization.part
          op: create
        - content: |-
            [ NFSMount_Global_Options ]
            nfsvers=4.2
            hard=True
            noatime=True
            nodiratime=True
            rsize=131072
            wsize=131072
            nconnect=8
          permissions: 420
          path: /etc/nfsmount.conf
          op: overwrite
    time:
        disabled: false
        servers:
            - time.cloudflare.com
    sysctls:
        fs.inotify.max_queued_events: "65536"
        fs.inotify.max_user_instances: "8192"
        fs.inotify.max_user_watches: "524288"
        net.core.rmem_max: "2500000"
        net.core.wmem_max: "2500000"
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
        kubePrism:
            enabled: true
            port: 7445
    udev:
        rules:
            - ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"
            - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
    nodeLabels:
        topology.kubernetes.io/region: utility
        topology.kubernetes.io/zone: w
cluster:
    id: ENC[AES256_GCM,data:XSCwl2bAwJlQqbzU4SH13mOVE30a2vlK1p5kUkzW9jhQiDXAQc1pE/Z4EDc=,iv:tNZ8UsKg3xxO3Ipvmi/tEYG8QlB7ZPkokgQOWJS9Eqc=,tag:4UBqrZW5NKU/wBg4TdaOEg==,type:str]
    secret: ENC[AES256_GCM,data:qTL40NEf0uliC0I8SsGgbCc+6JKdj2uHggV46nIPemNWWvcyQpd8M4BDE5E=,iv:OLh2qgOYtYnYZh3eCacZd9Ij/rQN1aRCyjaeay+CO9E=,tag:vBS59nMvA4y1xbifQJGtmw==,type:str]
    controlPlane:
        endpoint: https://192.168.254.89:6443
    network:
        cni:
            name: none
        dnsDomain: cluster.local
        podSubnets:
            - 10.42.0.0/16
        serviceSubnets:
            - 10.43.0.0/16
    coreDNS:
        disabled: true
    token: ENC[AES256_GCM,data:td8oVZK6R4inwbSXdjUuWmgXFaYg/Cw=,iv:XCfhQdpUz4rmxc936QKBS3ZxUGYSgL+dRSga5VgjD4Y=,tag:ACoy4FlblDv/ikLMEWAWBg==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:91nfW2h1Fpse5scU9qQZvAzpa8Q//17+BnkagiOOCAObRRwC5wC85tq9RvBDv3VXuLjenmhwy8nidQRXfGBuIbbmUaCwMsBVBNbnr2ltgd0Aj9ONV+/FSRhcWplhDOtyPyXy53dOvjOW30OLLYkxVFb52OGxAC+7B/TwRYiZIWdvvdD8eRFcHpuGS4tnc4KQN2T91yI8eh5Dyok8eNo9ltdWgBi8gMDd09nfcvP8A1an8HMNWPM4WPRN4swWOs3REJP+xW2V162cgQeJ8q466PbjD2hg0Rl/gU1Z3TWvtCOaD3U0YsrKQbC80ZSI3XYgLejLvz+RxpFeLCjBs9MxciUiCMvCWd2spMt6BWkcxBgRiiAbJYnuvsF6SXmlb+7HVr3wIY+C2xWV4b8FVQKxiTggaETaVlVWNTL/hQkFg6r4mX3xlinSU+rYJQ6FP1ifahautIXf++U3Ly4OczBvflt5UZAjQLqNsBAeF9r9rvrRHKgfdg4Ye6HXzr8NdOA1MF53UjQKKkvACB4MV0wT7m4Q/VfsChVpaltiDOPY2HHhS2U/wbGsymzBmd0T0HGLxB9Ew+eShSQIMrJYGAXFpLVsTM8PwIrj6v74GQYhmouUwMNiluziAmqT7gif+z7t8GONUTNr9qaqWJSD772nEGROkCIgq1cmAXwWDKnVvVSNuYbUmgt8ppDughceYJon+WgkJ6PuHEO09DYqGa1gHv6Z5bJkToi6HsasnDdqpXcC7qTjTZLUcUCh22LbiHKmtCFRAwVVGVdUoWDtOp5mr0rUEeR1JJq57F69v+YCW9VtVWF3Ug+4+ngRFb0M4GPsrz93iXpED6+tMqE+EuxvUfpxwFevjOWPOu5cnlgkP45IGC794CtzVfY4DbFmrcp+RFOOJwdrsZBBdEkJkVrjO07z4toWloWdwXuXF9Ptv+70i/OCLhWvhNsGz06+pNCz4O3ghniZEQ1YqgJ7a2wa7EPuucNWOF9fhl2YlSUaQMoHdZHjgXzX7Pu+lpOTGxrBcSlAT1Nd1cTeBxaOQPX8KWPFQLQ2j5h8uqfe3w==,iv:8Nl8PAe0GdfMQFSyyQDJUMdgfXUjz7AqWhdCXLONmgM=,tag:HaZC+q+hsyZ7leuTswGCww==,type:str]
        key: ""
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: false
            service:
                disabled: false
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age12j7f9ytucevfgfazw9h9rlaprtkv90kzunjkrsx90zsllnfhqemqhv6nrj
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBnOVkzMWRZWlRMQVJCTkxY
            Q1hBNW0yQ0V5WCtmRmIrMFhQdkQ3MFp6TW04CjBvWUhCak5SeGtJemRmRkU1RGVw
            cldQSXhwS0JHK2FzbWRNdEJEcHp4NHMKLS0tIG5rcXhWV3dsNGJMckg2cTRKVUln
            cXhKS0krejQ1bHNUVGIrd29lMDdjUEUKJli5GK3cHuuXBWVAiBysruNsnnY8nw5G
            6uf7+9s2ZOL6irCkiPMxrKhJF/KMhrP8GF1yvuPoSqNFHw59BHkRvw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-04-23T18:35:42Z"
    mac: ENC[AES256_GCM,data:h/OsQCny8TldKUQ2/+4x6q/NotXpRBPaxbIxEYZjb0zL91abd40MpVajxOVrSBwn9idPtsDfVZGFdYwWUov9eStScTHp3Cxl98b9AVoOS1lQDE4pQ9s7CcaaXmP47IV/9p7aILskh7m11KM0eXozY0v5dfOp2veIJg2A7n+s3J0=,iv:6wMXJBejV1Wi5/SWsfvFSI0d5SIsZtEfeN6o6v47RFI=,tag:QSP9n10SpY9Cb3PclBNUPA==,type:str]
    pgp: []
    encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
    version: 3.8.1
